# üê≥ Docker: –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## üìã –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –¥–≤—É—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

### ‚úÖ –ü–æ—á–µ–º—É 2 Docker —Ñ–∞–π–ª–∞ - —ç—Ç–æ –ù–û–†–ú–ê–õ–¨–ù–û?

**–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏!**
- **Facebook, Google, Netflix** - –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è dev/prod
- **–ü—Ä–∏–Ω—Ü–∏–ø**: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±—ã—Å—Ç—Ä–æ–π, –ø—Ä–æ–¥–∞–∫—à–µ–Ω - —Å—Ç–∞–±–∏–ª—å–Ω—ã–º

```
docker-compose.yml     ‚Üê –ü—Ä–æ–¥–∞–∫—à–µ–Ω (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
docker-compose.dev.yml ‚Üê –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Å–∫–æ—Ä–æ—Å—Ç—å)
```

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üñ•Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (`npm run dev`)
```bash
docker-compose.dev.yml
‚îú‚îÄ‚îÄ üê≥ PostgreSQL –≤ Docker
‚îú‚îÄ‚îÄ üê≥ users-service –≤ Docker (nodemon)
‚îú‚îÄ‚îÄ üê≥ companies-service –≤ Docker (nodemon) 
‚îú‚îÄ‚îÄ üê≥ operator-service –≤ Docker (nodemon)
‚îî‚îÄ‚îÄ üíª React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –õ–û–ö–ê–õ–¨–ù–û (Hot Reload)
```

### üåê –ü—Ä–æ–¥–∞–∫—à–µ–Ω (`docker-compose up`)
```bash
docker-compose.yml
‚îú‚îÄ‚îÄ üê≥ PostgreSQL –≤ Docker
‚îú‚îÄ‚îÄ üê≥ users-service –≤ Docker (node)
‚îú‚îÄ‚îÄ üê≥ companies-service –≤ Docker (node)
‚îú‚îÄ‚îÄ üê≥ operator-service –≤ Docker (node)
‚îî‚îÄ‚îÄ üê≥ React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤ Docker (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞)
```

## üìö –°–ü–†–ê–í–û–ß–ù–ò–ö –ö–û–ú–ê–ù–î

### üü¢ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|------------|-------------------|
| `npm run dev` | –ó–∞–ø—É—Å–∫ —Å Hot Reload | –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ |
| `npm run dev:build` | –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏—è | –î–æ–±–∞–≤–∏–ª–∏ npm –ø–∞–∫–µ—Ç |
| `npm run dev:fresh` | –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ + –æ—á–∏—Å—Ç–∫–∞ –ë–î | –ò–∑–º–µ–Ω–∏–ª–∏ `db/init.sql` |
| `npm run stop` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã |

### üî¥ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|------------|-------------------|
| `docker-compose up -d` | –ó–∞–ø—É—Å–∫ prod –≤–µ—Ä—Å–∏–∏ | –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π |
| `docker-compose up -d --build` | –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ prod | –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ |
| `docker-compose down -v && docker-compose up -d --build` | –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ prod | –ò–∑–º–µ–Ω–∏–ª–∏ `db/init.sql` ‚ö†Ô∏è |
| `docker-compose down` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ prod | –í—ã–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ |

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ë–î

### üéØ –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:
**–û–±–∞ Docker —Ñ–∞–π–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –û–î–ò–ù —Ñ–∞–π–ª `db/init.sql`!**

```
db/init.sql  ‚Üê‚îÄ‚îê
               ‚îú‚îÄ‚îÄ docker-compose.dev.yml (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
               ‚îî‚îÄ‚îÄ docker-compose.yml (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
```

### üìù –ê–ª–≥–æ—Ä–∏—Ç–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î:

#### 1. **–ò–∑–º–µ–Ω–∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î –≤ `db/init.sql`**
```bash
# ‚úÖ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (–¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å):
npm run dev:fresh

# ‚ö†Ô∏è –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å):
# –°–Ω–∞—á–∞–ª–∞ backup, –ø–æ—Ç–æ–º –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

#### 2. **–î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É/–ø–æ–ª–µ**
```sql
-- db/init.sql
CREATE TABLE new_table (...);  -- –î–æ–±–∞–≤–∏–ª–∏ —ç—Ç–æ
```

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
npm run dev:fresh  ‚Üê –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –ë–î —Å –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ–π

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω:
# –ù—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è! (—Å–º. —Ä–∞–∑–¥–µ–ª "–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î")
```

## üö® –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê

### ‚ö†Ô∏è –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –û–ë–ê –æ–∫—Ä—É–∂–µ–Ω–∏—è:

#### 1. **–ò–∑–º–µ–Ω–∏–ª–∏ `db/init.sql`**
```bash
# ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
npm run dev:fresh

# ‚ö†Ô∏è –ü—Ä–æ–¥–∞–∫—à–µ–Ω (–û–°–¢–û–†–û–ñ–ù–û!):
# –°–Ω–∞—á–∞–ª–∞ backup, –ø–æ—Ç–æ–º –º–∏–≥—Ä–∞—Ü–∏—è
```

#### 2. **–î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å**
```yaml
# –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –û–ë–ê —Ñ–∞–π–ª–∞:
# - docker-compose.yml
# - docker-compose.dev.yml
```

#### 3. **–ò–∑–º–µ–Ω–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)**
```bash
# –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:
# .env.production —Ñ–∞–π–ª
```

### ‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¢–û–õ–¨–ö–û —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É:

#### 1. **–ò–∑–º–µ–Ω–∏–ª–∏ –∫–æ–¥ React/Node.js**
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è Hot Reload
# –ù–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!
```

#### 2. **–î–æ–±–∞–≤–∏–ª–∏ npm –ø–∞–∫–µ—Ç**
```bash
npm run dev:build  # –¢–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```

### ‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¢–û–õ–¨–ö–û –ø—Ä–æ–¥–∞–∫—à–µ–Ω:

#### 1. **–ò–∑–º–µ–Ω–∏–ª–∏ production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
docker-compose up -d --build
```

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ò–ó–ú–ï–ù–ï–ù–ò–Ø–ú–ò

### –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ë–î:
- [ ] –ï—Å—Ç—å –ª–∏ backup –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞?
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ?
- [ ] –ü–æ–Ω—è—Ç–Ω–æ –ª–∏ –∫–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è?

### –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Å–µ—Ä–≤–∏—Å–∞:
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –≤ `docker-compose.yml`?
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –≤ `docker-compose.dev.yml`?
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –≤ `package.json`?

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ `npm run dev`?
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ `docker-compose up -d`?
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è?

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: "–î–æ–±–∞–≤–∏–ª –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ —Ç–∞–±–ª–∏—Ü—É users"

```sql
-- db/init.sql
ALTER TABLE users ADD COLUMN phone VARCHAR(20);
```

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```bash
# 1. –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
npm run dev:fresh  # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –ë–î

# 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

# 3. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –¥–µ–ø–ª–æ–∏—Ç—å):
# –°–Ω–∞—á–∞–ª–∞ backup, –ø–æ—Ç–æ–º –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: "–î–æ–±–∞–≤–∏–ª –Ω–æ–≤—ã–π npm –ø–∞–∫–µ—Ç –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥"

```bash
cd frontend
npm install some-package
```

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```bash
# 1. –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
npm run dev:build  # –ü–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

# 2. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:
docker-compose up -d --build  # –ü–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç —Å –Ω–æ–≤—ã–º –ø–∞–∫–µ—Ç–æ–º
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: "–°–æ–∑–¥–∞–ª –Ω–æ–≤—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å"

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `services/new-service/`
2. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –≤ `docker-compose.yml`
3. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –≤ `docker-compose.dev.yml`
4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ `package.json`

## üéØ –ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### 1. **–û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –ë–î**
- `db/init.sql` - –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ–±–æ–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ –æ–±–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2. **–†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–ø—É—Å–∫–∞**
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ª–æ–∫–∞–ª—å–Ω–æ (Hot Reload)
- **–ü—Ä–æ–¥–∞–∫—à–µ–Ω**: –í—Å—ë –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)

### 3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –ú–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ (`dev:fresh`)
- **–ü—Ä–æ–¥–∞–∫—à–µ–Ω**: –ù–ò–ö–û–ì–î–ê –Ω–µ —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ backup

### 4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ò–∑–º–µ–Ω–∏–ª –ë–î
npm run dev:fresh

# –î–æ–±–∞–≤–∏–ª –ø–∞–∫–µ—Ç
npm run dev:build

# –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
git push
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
git pull && docker-compose up -d --build
```

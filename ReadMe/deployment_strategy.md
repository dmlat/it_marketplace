# –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–µ–ø–ª–æ—è ITM Marketplace

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Development)
```bash
npm run dev  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç docker-compose.dev.yml
```
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (Hot Reload)
- **–ë—ç–∫–µ–Ω–¥**: –í Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **–ë–î**: PostgreSQL –≤ Docker —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω (Production)
```bash
docker-compose up -d  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç docker-compose.yml
```
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: –í Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞)
- **–ë—ç–∫–µ–Ω–¥**: –í Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **–ë–î**: PostgreSQL –≤ Docker –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä

## üì¶ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é
```bash
# 1. –°–æ–∑–¥–∞—Ç—å production .env —Ñ–∞–π–ª
cp ReadMe/env_example.md .env.production

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
# - JWT_SECRET - –¥–ª–∏–Ω–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á
# - POSTGRES_PASSWORD - —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
# - NODE_ENV=production
```

### –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Ubuntu/CentOS):
git clone <your-repo>
cd ITM_app

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∏ Docker Compose
sudo apt update
sudo apt install docker.io docker-compose

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ production —Ä–µ–∂–∏–º–µ
docker-compose up -d --build
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –∫–æ–¥–µ:
git pull
docker-compose up -d --build

# –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –ë–î (init.sql):
docker-compose down -v  # ‚ö†Ô∏è –£–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ –ë–î!
docker-compose up -d --build
```

## üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ë–î

### –ü—Ä–æ–±–ª–µ–º–∞: –£ –≤–∞—Å 2 –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å)
- **–ü—Ä–æ–¥–∞–∫—à–µ–Ω**: –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—É–¥–∞–ª—è—Ç—å –ù–ï–õ–¨–ó–Ø!)

### –†–µ—à–µ–Ω–∏–µ: –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

#### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (–ø—Ä–æ—Å—Ç–∞—è):
```sql
-- db/init.sql - —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã —Å –Ω—É–ª—è
CREATE TABLE users (...);
CREATE TABLE companies (...);
```

#### –ë—É–¥—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (–º–∏–≥—Ä–∞—Ü–∏–∏):
```
db/
‚îú‚îÄ‚îÄ init.sql          # –ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ 001_add_products_table.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002_add_orders_table.sql
‚îÇ   ‚îî‚îÄ‚îÄ 003_modify_users_table.sql
```

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î:

#### ‚úÖ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (–º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ):
```bash
npm run dev:fresh  # –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –ë–î —Å –Ω—É–ª—è
```

#### ‚ö†Ô∏è –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å):
```bash
# 1. –°–æ–∑–¥–∞—Ç—å backup
docker exec itm-postgres-db pg_dump -U user itm_db > backup.sql

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker exec itm-postgres-db psql -U user -d itm_db -f /path/to/migration.sql

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–π VPS
- **–ì–¥–µ**: DigitalOcean, Hetzner, Yandex Cloud
- **–ö–∞–∫**: SSH + Docker Compose
- **–ü–ª—é—Å—ã**: –ü—Ä–æ—Å—Ç–æ—Ç–∞, –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- **–ú–∏–Ω—É—Å—ã**: –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–∞–º–æ–º—É

### –í–∞—Ä–∏–∞–Ω—Ç 2: Platform-as-a-Service
- **–ì–¥–µ**: Heroku, Railway, Render
- **–ö–∞–∫**: Git push –¥–ª—è –¥–µ–ø–ª–æ—è
- **–ü–ª—é—Å—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
- **–ú–∏–Ω—É—Å—ã**: –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è, –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Ä–æ–∂–µ

### –í–∞—Ä–∏–∞–Ω—Ç 3: Kubernetes (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
- **–ì–¥–µ**: Google Cloud, AWS, Yandex Cloud
- **–ö–∞–∫**: Kubernetes manifests
- **–ü–ª—é—Å—ã**: –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- **–ú–∏–Ω—É—Å—ã**: –°–ª–æ–∂–Ω–æ—Å—Ç—å

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- [ ] –°–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ .env.production
- [ ] JWT_SECRET - –¥–ª–∏–Ω–Ω–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS (SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ React (`npm run build`)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏)

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –ë–î
- [ ] Health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] Restart policy –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## üîÆ –≠–≤–æ–ª—é—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –°–µ–π—á–∞—Å (MVP):
```
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] ‚Üí [Nginx] ‚Üí [Docker Compose] ‚Üí [PostgreSQL]
                              ‚Üì
                    [users-service, companies-service, ...]
```

### –í –±—É–¥—É—â–µ–º (Scale):
```
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] ‚Üí [Load Balancer] ‚Üí [Kubernetes Cluster]
                                      ‚Üì
                              [Multiple instances of services]
                                      ‚Üì
                              [Managed PostgreSQL + Redis]
```

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã

### –î–ª—è –Ω–∞—á–∞–ª–∞:
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π VPS** - –Ω–µ —É—Å–ª–æ–∂–Ω—è–π—Ç–µ
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –ë–î** - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ
3. **–í–µ–¥–∏—Ç–µ changelog** - –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ —á—Ç–æ –º–µ–Ω—è–ª–∏

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
1. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ** —Å `npm run dev`
2. **–î–µ–ø–ª–æ–π—Ç–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** (–∫–æ–ø–∏—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
3. **–î–µ–ø–ª–æ–π—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω** —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –õ–æ–≥–∏: `docker-compose logs -f`
- –°—Ç–∞—Ç—É—Å: `docker-compose ps`
- –†–µ—Å—É—Ä—Å—ã: `docker stats`
